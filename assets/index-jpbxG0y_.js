import{b as j,u as _,d as N,r as m,e as I,j as n}from"./vendor-QJey4Jae.js";const R="_container_1kneq_1",k="_textarea_1kneq_22",b="_row_1kneq_29",W="_compareResult_1kneq_35",y="_answerRow_1kneq_39",S="_col1_1kneq_44",T="_inputComparedRow_1kneq_48",c={container:R,textarea:k,row:b,compareResult:W,answerRow:y,col1:S,inputComparedRow:T},p=[{sentence:"Please get us a meeting room for the next hour."},{sentence:"Communication skills have become more important in recent years."},{sentence:"Before preparing any food, be sure to wash your hands well."},{sentence:"I want to make an appointment with the manager."},{sentence:"In my opinion, this car should be repaired soon."},{sentence:"Rail transport is becoming more and more popular."}],x={currentIndex:0,total:0},q=j((t,o)=>({...x,setCurrentIndex:e=>{console.log("setCurrentIndex",e),t({currentIndex:e})},setTotal:e=>t({total:e}),next:()=>{const{currentIndex:e,total:a}=o();e+1>=a?t({currentIndex:0}):t({currentIndex:e+1})},prev:()=>{const{currentIndex:e,total:a}=o();e-1<0?t({currentIndex:a-1}):t({currentIndex:e-1})},reset:()=>t({...x})})),A=t=>{const o=window.speechSynthesis,e=new SpeechSynthesisUtterance(t);o.speak(e)},E=(t,o)=>{const e={answer:t,inputOriginal:o,inputCompared:[],total:0,correct:0},a=t.replace(/[,.]/g,""),u=o.replace(/[,.]/g,"");console.log("answer",t),console.log("input",o),console.log("answerWithoutComma",a),console.log("inputWithoutComma",u);const d=a.split(" "),s=u.split(" ");console.log("answerArr",d),console.log("inputArr",s),e.total=d.length;const i=[];for(let r=0;r<s.length;r++)d.indexOf(s[r])!==-1?(d.splice(d.indexOf(s[r]),1),e.correct++,i.push({word:r===s.length-1?s[r]:s[r]+" ",correct:!0})):i.push({word:r===s.length-1?s[r]:s[r]+" ",correct:!1});return o.endsWith(".")&&t.endsWith(".")&&i.push({word:".",correct:!0}),e.inputCompared=i,console.log(e),e},P=()=>{const{id:t}=_(),o=N(),[e,a]=m.useState(),[u,d]=m.useState(""),s=m.useRef(""),{currentIndex:i,setCurrentIndex:r,setTotal:w,total:f,reset:g}=q(I(l=>l));m.useEffect(()=>{g(),a(void 0),d(""),s.current="";const l=Number(t)-1;r(l);const h=setTimeout(()=>{A(p[l].sentence)},1e3);return()=>{clearTimeout(h)}},[t]),m.useEffect(()=>{w(p.length),v()},[]);const v=async()=>{};m.useEffect(()=>{console.log(u),s.current=u},[u]);const C=()=>{console.log("inputTextRef.current",s.current),a(E(p[i].sentence,s.current))};return n.jsxs("div",{className:c.container,children:[n.jsxs("div",{children:["Num ",i+1]}),n.jsx("textarea",{name:"",id:"",className:c.textarea,onChange:l=>d(l.target.value),value:u}),n.jsxs("div",{className:c.row,children:[n.jsx("button",{onClick:C,children:"Submit"}),n.jsxs("div",{children:[n.jsx("button",{style:{marginRight:"10px"},onClick:()=>{o(i===0?`/Wfd/${p.length}`:`/Wfd/${Number(t)-1}`)},children:"Prev"}),n.jsx("button",{onClick:()=>{i+1>=f?o("/Wfd/1"):o(`/Wfd/${Number(t)+1}`)},children:"Next"})]})]}),e&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:c.compareResult,children:[n.jsxs("div",{className:c.answerRow,children:[n.jsx("div",{className:c.col1,children:"Answer: "}),n.jsx("div",{children:e==null?void 0:e.answer})]}),n.jsxs("div",{className:c.answerRow,children:[n.jsx("div",{className:c.col1,children:"Input: "}),n.jsx("div",{className:c.inputComparedRow,children:e==null?void 0:e.inputCompared.map((l,h)=>n.jsx("span",{style:{color:l.correct?"green":"#333"},children:l.word},h))})]})]}),n.jsxs("div",{className:c.answerRow,children:[n.jsx("div",{className:c.col1,children:"Overall:"}),n.jsxs("div",{className:c.inputCompareRow,children:[e==null?void 0:e.correct,"/",e==null?void 0:e.total]})]})]})]})};export{P as default};
